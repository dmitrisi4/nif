document&&document.addEventListener("DOMContentLoaded",function(){let t,e;let n="http://localhost:4000/api/order/",a="http://localhost:4000/api/contacts/",o=document.getElementById("login-section"),r=document.getElementById("page-section"),l=document.getElementById("btn-exit-wrapper"),i=document.getElementById("btn-exit"),c=document.getElementById("form-login"),d=document.getElementById("login-email"),s=document.getElementById("login-password"),u=document.getElementById("btn-orders-page"),h=document.getElementById("btn-contacts-page"),m=document.getElementById("order-page"),p=document.getElementById("contact-page"),g=!1,y=!1,f='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18.52 4l-1 1H2V4zM2 8v1h11.52l1-1zm4.52 8H2v1h3.655a1.477 1.477 0 0 1 .282-.417zM2 12v1h7.52l1-1zm20.95-6.066a.965.965 0 0 1 .03 1.385L9.825 20.471 5.73 22.227a.371.371 0 0 1-.488-.487l1.756-4.097L20.15 4.491a.965.965 0 0 1 1.385.03zM9.02 19.728l-1.28-1.28-.96 2.24zM20.093 8.79L18.68 7.376 8.382 17.674l1.413 1.414zm1.865-2.445l-.804-.838a.42.42 0 0 0-.6-.007l-1.167 1.17L20.8 8.083l1.152-1.151a.42.42 0 0 0 .006-.587z"></path><path fill="none" d="M0 0h24v24H0z"></path></g></svg>';async function w(t,e){try{let n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await n.json();a?(function(t,e,n){let a="";if(n){let t=new Date;t.setTime(t.getTime()+6e4*n),a="; expires="+t.toUTCString()}document.cookie=t+"="+(e||"")+a+"; path=/"}("tokenAuth",a.token,60),location.reload()):alert("There was a problem with the request")}catch(t){console.error("Error:",t)}}function E(t){let e=t+"=",n=document.cookie.split(";");for(let t=0;t<n.length;t++){let a=n[t];for(;" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}async function b(){let e=E("tokenAuth"),a=await fetch(n,{headers:{Authorization:e}});t=await a.json(),200===a.status&&(o.style.display="none",r.style.display="flex",l.style.display="flex",B("page")&&"contacts"===B("page")||T(),"contacts"===B("page")&&k())}async function v(e){let a=E("tokenAuth");if(a)try{let o=await fetch(`${n}${e}`,{method:"DELETE",headers:{Authorization:a}});t=await o.json(),200===o.status&&(g=!1,M("order-table"),b())}catch(t){console.error("Error:",t)}}async function k(){let t=E("tokenAuth");if(t)try{let n=await fetch(a,{headers:{Authorization:t}});e=await n.json(),200===n.status&&(m.style.display="none",p.style.display="block",y||function(t){let e=["ID","Name","Email","Comment","created","updated"].map(t=>z("div","",t)),n=t.map(t=>{let e=Object.values(t).map(t=>z("div","",t));return e.push(z("div","table-btns-wrap",...[A(t.id,f,""),A(t.id,"X",L)])),z("div","contacts-row-wrapper",...e)}),a=[z("div","contacts-row-header",...e),z("div","",...n)],o=document.getElementById("table-contacts-container");o.append(z("div","",...a)),y=!0}(e),I({page:"contacts"}),h.style.borderColor="black")}catch(t){console.error("Error:",t)}}async function L(e){let n=E("tokenAuth");if(n)try{let o=await fetch(`${a}${e}`,{method:"DELETE",headers:{Authorization:n}});t=await o.json(),200===o.status&&(y=!1,M("contact-table"),k())}catch(t){console.error("Error:",t)}}function I(t){let e=window.location.href,n=new URL(e);for(let e in t)n.searchParams.set(e,t[e]);window.history.pushState(null,null,n.href)}function B(t){let e=window.location.search.slice(1),n=new URLSearchParams(e);return n.get(t)}function T(){m.style.display="block",p.style.display="none",g||function(t){let e=["ID","Name","Last name","Email","Phone number","WhatsApp/ Telegramm","Country","Plan","created","updated"].map(t=>z("div","",t)),n=t.map(t=>{let e=Object.values(t).map(t=>z("div","",t));return e.push(z("div","table-btns-wrap",...[A(t.id,f,""),A(t.id,"X",v)])),z("div","table-row-wrapper",...e)}),a=[z("div","table-row-header",...e),z("div","",...n)],o=document.getElementById("table-container");o.append(z("div","",...a)),g=!0}(t),I({page:"orders"}),u.style.borderColor="black"}function z(t,e,...n){let a=document.createElement(t);return e.length>0&&a.classList.add(e),a.append(...n),a}function A(t,e,n){let a=document.createElement("button");return a.classList.add("btn-table"),a.addEventListener("click",()=>{n(t)}),a.innerHTML=e,a}function M(t){let e=document.getElementById("table-container"),n=document.getElementById("table-contacts-container");"order-table"===t&&(e.innerHTML=""),"contact-table"===t&&(n.innerHTML="")}(async function t(){let t=E("tokenAuth");if(t)try{b()}catch(t){console.error("Error:",t)}})(),c.addEventListener("submit",t=>{t.preventDefault(),w("http://localhost:4000/api/auth/login",{email:d.value,password:s.value})}),i.addEventListener("click",()=>{document.cookie="tokenAuth=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.reload()}),h.addEventListener("click",()=>{k()}),u.addEventListener("click",()=>{T()})},!1);
//# sourceMappingURL=index.df8f9ba5.js.map
